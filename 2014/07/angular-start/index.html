<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0" />
    <meta name="author" content="Creeper Yang" />
    <meta name="description" content="Creeper's blog, focus on JavaScript/Html(5)/Css(3)" />
    <meta name="keywords" content="Creeper Yang,blog,JavaScript,html5,development">
    
    <title>初识AngularJS | Creeper&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <link rel="alternative" href="/atom.xml" title="Creeper&#39;s Blog" type="application/atom+xml">
    
    
        <link rel="icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/assets/styles/material.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/styles/app.css" type="text/css">
</head>
    <body class='mdl-color--grey-100 mdl-color-text--grey-800 mdl-base'>
        <div class="mdl-layout post-page article-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100">
    <div class="article-ribbon">
        <a class="btn-back mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="javascript:history.back();">
            <i class="material-icons">arrow_back</i>
        </a>
    </div>
    <main class="article-main mdl-layout__content">
        <div class="cus-grid section--center mdl-grid">
<div class="mdl-cell mdl-cell--12-col">
    <div class="article-content mdl-color--white mdl-shadow--4dp mdl-color-text--grey-800">
        <div class="article-body">
            <div class="article-crumbs mdl-color-text--grey-500">
                
    
    <span class="category-item">Posts</span> &gt; <span class="category-item">frontend</span> &gt; <span class="category-item">初识AngularJS</span> 

            </div>
            <h3>初识AngularJS</h3>
            <p>14年4月入职新公司，跟着Eyal开始接触、使用node.js，angular.js，d3.js等等，感觉到前端世界一扇不同的大门为我开启了。angular.js不同于以前接触过的Backbone，“enhance html”的概念是如此自然和深刻。在我的angular.js学习之路上，有了这几篇或十几篇有关angular的文章。</p>
<!--view-break-->
<p>首先声明学习过的资料（这些资料可能会出现在文章中）：</p>
<ul>
<li>Angular官网：<a href="https://angularjs.org/" target="_blank" rel="external">https://angularjs.org/</a>（不需说明，官方文档）</li>
<li>A Better Way to Learn AngularJS：<a href="https://thinkster.io/angulartutorial/a-better-way-to-learn-angularjs/" target="_blank" rel="external">https://thinkster.io/angulartutorial/a-better-way-to-learn-angularjs/</a>（perfect）</li>
<li>吕大豹「走进AngularJs」：<a href="http://www.cnblogs.com/lvdabao/tag/AngularJs/" target="_blank" rel="external">http://www.cnblogs.com/lvdabao/tag/AngularJs/</a>（很风趣，不想看英文的可以看看）</li>
</ul>
<h2 id="AngularJs是什么?">AngularJs是什么?</h2><p>AngularJS是为动态web应用设计的结构化框架。它让你可以用html作为模板语言，让你扩展html语法来更清晰简洁地展现你的应用组件。angular的数据绑定和依赖注入可以让你少写大量代码。angular是前端框架，可以搭配任意后台。</p>
<p>html作为声明式语言对静态文档而言是不错的，但不能满足动态web应用的需要。一些解决方案是使用类库或框架：</p>
<ul>
<li>类库：类库是一些函数的集合，它能帮助你写Web应用。起主导作用的是你的代码，由你来决定何时使用类库。类库有：<code>jQuery</code>等。</li>
<li>框架：框架是一种特殊的、已经实现的Web应用，你只需要对它填充具体的业务逻辑。这里框架是起主导作用的，由它来根据具体的应用逻辑来调用你的代码。框架有：<code>durandal</code>, <code>ember</code>等。</li>
</ul>
<p>angular采用了另一个解决方案。它试图缩小以静态文档为核心的html和web应用需要的创建新html结构的不匹配。angular通过指令教会浏览器新语法。</p>
<p>一句话概括angular：</p>
<blockquote>
<p>HTML enhanced for web apps!</p>
</blockquote>
<h3 id="全面的客户端解决方案">全面的客户端解决方案</h3><p>angular是web应用在客户端一侧的全面解决方案。</p>
<ul>
<li>构建CRUD应用所需要的全部：数据绑定，模板指令，表格验证，路由，重用组件，依赖注入。</li>
<li>测试：单元测试，端到端测试，mocks和测试工具。</li>
<li>有种子应用和测试脚本作为开发起点。</li>
</ul>
<h3 id="适用范围">适用范围</h3><p>angular为CRUD应用而设计。游戏和GUI编辑器等需要密集、复杂DOM操作不适合angular，用抽象度更低的类库可能更好，如<code>jQuery</code>。</p>
<h2 id="AngularJS概览">AngularJS概览</h2><p>学习新知识前，要在深入细节前，先树立有关话题的正确框架。所以可以先在<a href="https://docs.angularjs.org/guide/concepts" target="_blank" rel="external">官网</a>看看一些基本概念。</p>
<table>
<thead>
<tr>
<th>概念</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Template</td>
<td>有额外标签的html（HTML with additional markup）</td>
</tr>
<tr>
<td>Directives</td>
<td>用自定义属性或元素扩展html（extend HTML with custom attributes and elements）</td>
</tr>
<tr>
<td>Model</td>
<td>数据，在视图中展示，并和用户交互（the data shown to the user in the view and with which the user interacts）</td>
</tr>
<tr>
<td>Scope</td>
<td>上下文（环境），model存储在其上，model因此可以被指令、控制器、表达式访问（context where the model is stored so that controllers, directives and expressions can access it）</td>
</tr>
<tr>
<td>Expressions</td>
<td>访问scope上的变量与方法（access variables and functions from the scope）</td>
</tr>
<tr>
<td>Compiler</td>
<td>解析模板，实例化指令和表达式（parses the template and instantiates directives and expressions）</td>
</tr>
<tr>
<td>Filter</td>
<td>格式化表达式的结果（formats the value of an expression for display to the user）</td>
</tr>
<tr>
<td>View</td>
<td>用户见到的（Dom）（what the user sees (the DOM)）</td>
</tr>
<tr>
<td>Data Binding</td>
<td>同步模型与视图的数据（sync data between the model and the view）</td>
</tr>
<tr>
<td>Controller</td>
<td>视图背后的业务逻辑（the business logic behind views）</td>
</tr>
<tr>
<td>Dependency Injection</td>
<td>创建并引入对象和方法（Creates and wires objects and functions）</td>
</tr>
<tr>
<td>Injector</td>
<td>依赖注入的容器（dependency injection container）</td>
</tr>
<tr>
<td>Module</td>
<td>指令、控制器、服务等等的容器，可以配置注入（a container for the different parts of an app including controllers, services, filters, directives which configures the Injector）</td>
</tr>
<tr>
<td>Service</td>
<td>可重用的并且独立于视图的业务逻辑（reusable business logic independent of views）</td>
</tr>
</tbody>
</table>
<h2 id="AngularJS禅理">AngularJS禅理</h2><p>angular基于这样的理念而开发：在一起构建UI和软件组件时，声明式语言比命令式语言更好;命令式语言更适合写业务逻辑。</p>
<ul>
<li>把Dom操作和应用逻辑解耦非常好，折显著提高代码可测试性。</li>
<li>测试和编程一样重要，测试难度取决于代码结构。</li>
<li>客户端和服务端解偶很好，这使开发可以并行，并且两边都可以复用。</li>
<li>框架如果能从头到尾给予开发人员引导，则很好。从ui设计到编写到测试。</li>
<li>使一般任务容易，使难度任务可以完成总是好的。</li>
</ul>
<p>angular让你免于以下痛苦：</p>
<ul>
<li>注册回调。</li>
<li>以编程操作DOM。</li>
<li>把数据填充到UI/从UI取数据。</li>
<li>写一堆初始化代码只是让程序可以启动。</li>
</ul>
<p>以上是对angular的概览，基本是对<a href="https://docs.angularjs.org/guide/introduction" target="_blank" rel="external">https://docs.angularjs.org/guide/introduction</a>的翻译与精简，并再次强调：一个正确的印象要比急于深入细节重要。</p>
<h2 id="我希望我早知道这些关于AngularJS的">我希望我早知道这些关于AngularJS的</h2><p>这是一段补充，来自<a href="http://ruoyusun.com/2013/05/25/things-i-wish-i-were-told-about-angular-js.html" target="_blank" rel="external">Ruoyu Sun’s博客「Things I Wish I Were Told About Angular.js」</a>。在开始深入学习angular前读一读这篇文章可能会比较好。但请注意：这一段基于<code>angularJS 1.0.x</code>，一些内容可能已经不再合适。</p>
<h3 id="关于学习曲线">关于学习曲线</h3><p>Backbone.js在前期就有很陡峭的学习曲线，写一个最简单的应用可能就需要学很多，但一旦你学会，写任何Backbone的应用可能也不需要更多知识了。</p>
<p>Angular.js不同，你可能只需要知道控制器与一些指令就能开始写简单应用，但后面的学习曲线陡峭。</p>
<h3 id="在开始前就要理解模块">在开始前就要理解模块</h3><p>不要把代码仍在一个大文件里，学会模块化。可以把<code>controllers</code>分解到不同模块里，按需加载。可以从<code>controllers</code>中分解出通用的<code>filter</code>和<code>services</code>。另外，理解<code>dependency injection (DI)</code>。依赖注入可以使代码解耦合并更易维护。</p>
<h3 id="When_Your_Controllers_Get_Bigger,_Learn_Scope">When Your Controllers Get Bigger, Learn Scope</h3><p>你一开始不必理解<code>scope</code>，把它当作魔法就好。但你可能已经、或者必然会遇到以下问题：</p>
<p><strong>为什么我的视图不更新？</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeCtrl</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $scope.message = <span class="string">"I am here!"</span>;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>为什么<code>ng-model=&quot;touched&quot;</code>不像预期那样工作？</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="php"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SomeCtrl</span><span class="params">(<span class="variable">$scope</span>)</span> </span>&#123;</span><br><span class="line">    <span class="variable">$scope</span>.items = [&#123; value: <span class="number">2</span> &#125;];</span><br><span class="line">    <span class="variable">$scope</span>.touched = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span> <span class="attribute">ng-repeat</span>=<span class="value">"item in items"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">ng-model</span>=<span class="value">"item.value"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">ng-model</span>=<span class="value">"touched"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">li</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上都跟<code>$scope</code>有关。更重要的是，当你的控制器越来越大，是时候拆分为子控制器了，并且继承与<code>$scope</code>密切相关。你应该知道<code>$scope</code>怎么工作：</p>
<ul>
<li>数据绑定和<code>$scope.$watch()</code>、<code>$scope.$apply()</code>的关系？</li>
<li>控制器和其子控制器怎么分享<code>$scope</code>？</li>
<li>angular什么时候会自动创建新的<code>$scope</code>？</li>
<li>事件（<code>$scope.$on</code>, <code>$scope.$emit</code>, <code>$scope.$broadcast</code>）怎么在<code>scopes</code>之间传递？</li>
</ul>
<p>对上面两个问题，答案仅供参考：</p>
<ol>
<li>你需要<code>$scope.$apply()</code>;</li>
<li>在<code>ng-repeat</code>内，angular自动创建新的<code>scope</code>。</li>
</ol>
<h3 id="当你在控制器内操作DOM，那么写指令">当你在控制器内操作DOM，那么写指令</h3><p>angular推荐控制器和视图（DOM）之间的分离。</p>
<p>但需要在控制器中操作DOM的情况有时不可避免，典型的例子如jQuery的插件。尽管jQuery插件已经有点过时了，但它的生态系统不会那么快消失。然而，在控制器中使用jQuery插件非常<strong>糟糕</strong>：你的控制器将很难测试，而且难以复用。</p>
<p>最好的方法是写自定义指令。指令可以当作可复用的组件：不仅是jQuery插件，还可以是在多处使用的你自己的控制器。最好的地方在于，你的控制器不必知道指令的存在，交流由scope共享和$scope事件来完成。</p>
<p>对自定义指令的一句话总结：控制逻辑放在指令控制器中，DOM操作放在<code>link</code>函数中，scope共享是胶水。</p>
<blockquote>
<p>For any of you who look for a word of wisdom, here is my one sentence summary: put control logic in directive controller, and DOM logic in link function; scope sharing is the glue.</p>
</blockquote>
<h3 id="angular的路由可能不是你所想的">angular的路由可能不是你所想的</h3><p>路由可能是个陷阱。不像Backbone，angular监视<code>location.hash</code>，当路由符合某个规则时调用回调。Angular.js路由工作时与服务器端路由类似，它与<code>ng-view</code>协同工作。当符合一种路由时，angular会加载模板并注入ng-view，一些控制器会被实例化。</p>
<p>你可以写自己的服务来代替路由，如果你不喜欢这种工作机制的话。</p>
<hr>
<p>这篇文章作为「angular学习系列」的开篇可能有点冗长，一下子抛出这么多概念也可能超出了初学者的舒适范围，但正如前面提到的：树立正确的框架要比管中窥豹好。</p>
<p>另外，感谢<a href="https://thinkster.io/angulartutorial" target="_blank" rel="external">thinkster</a>的angular集成，对学习angular真是再好不过。<a href="http://ruoyusun.com/" target="_blank" rel="external">Ruoyu Sun’s</a>的博客很不错，感兴趣的可以多看看。</p>
<hr>

        </div>
        
            <section id="comments">
                <div id="disqus_thread">
                    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                </div>
            </section>
        
    </div>
    <nav class="pagination-bar mdl-color-text--grey-50">
    
        <a href="/2014/07/angular-bootstrap/" class="pagination__button">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900">
                <i class="material-icons">arrow_back</i>
            </button>
            Newer
        </a>
    
    <div class="section-spacer"></div>
    
</nav>
</div>
        </div>
    </main>
</div>

    <script>
        var disqus_shortname = 'ghblog-cp'; 
            var disqus_url = 'http://creeperyang.github.io/2014/07/angular-start/'; 
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>

        <script src="/assets/scripts/material.min.js" type="text/javascript"></script>
        
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63704729-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

    </body>
</html>