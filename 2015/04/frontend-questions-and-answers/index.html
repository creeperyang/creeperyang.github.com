<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0" />
    <meta name="author" content="Creeper Yang" />
    <meta name="description" content="Creeper's blog, focus on JavaScript/Html(5)/Css(3)" />
    <meta name="keywords" content="Creeper Yang,blog,JavaScript,html5,development">
    
    <title>前端问题集锦 | Creeper&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <link rel="alternative" href="/atom.xml" title="Creeper&#39;s Blog" type="application/atom+xml">
    
    
        <link rel="icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/assets/styles/material.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/styles/app.css" type="text/css">
</head>
    <body class='mdl-color--grey-100 mdl-color-text--grey-800 mdl-base'>
        <div class="mdl-layout post-page article-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100">
    <div class="article-ribbon">
        <a class="btn-back mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="javascript:history.back();">
            <i class="material-icons">arrow_back</i>
        </a>
    </div>
    <main class="article-main mdl-layout__content">
        <div class="cus-grid section--center mdl-grid">
<div class="mdl-cell mdl-cell--12-col">
    <div class="article-content mdl-color--white mdl-shadow--4dp mdl-color-text--grey-800">
        <div class="article-body">
            <div class="article-crumbs mdl-color-text--grey-500">
                
    
    <span class="category-item">Posts</span> &gt; <span class="category-item">frontend</span> &gt; <span class="category-item">JavaScript</span> &gt; <span class="category-item">前端问题集锦</span> 

            </div>
            <h3>前端问题集锦</h3>
            <p>关于前端，工作和学习过程中遇到过许多问题，也解答过许多别人的问题。这篇博客权当一个记录，记录一些有价值的问题。</p>
<!--view-break-->
<h2 id="1-_JavaScript语法相关问题">1. JavaScript语法相关问题</h2><h3 id="1-1_对象字面值的点操作符问题">1.1 对象字面值的点操作符问题</h3><ul>
<li><p>问题： </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;a:<span class="number">1</span>&#125;.a <span class="comment">// Uncaught SyntaxError: Unexpected token .</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解决：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(&#123;a:<span class="number">1</span>&#125;.a) <span class="comment">// 或</span></span><br><span class="line">(&#123;a:<span class="number">1</span>&#125;).a</span><br></pre></td></tr></table></figure>
</li>
<li><p>原因：</p>
<p>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#Object_literals" target="_blank" rel="external">MDN: Object literals</a></p>
<blockquote>
<p>An object literal is a list of zero or more pairs of property names and associated values of an object, enclosed in curly braces ({}). You should not use an object literal at the beginning of a statement. This will lead to an error or not behave as you expect, because the { will be interpreted as the beginning of a block.</p>
</blockquote>
<p>  简单说，就是声明对象字面值时，语句开头不应该用<code>{</code>，因为js解释器会认为这是语句块（<code>block</code>）的开始。</p>
</li>
</ul>
<h3 id="1-2_字符串字面值的点操作符问题">1.2 字符串字面值的点操作符问题</h3><ul>
<li><p>问题：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>; num.toFixed(<span class="number">2</span>) <span class="comment">// &gt;&gt; "123.00"</span></span><br><span class="line"><span class="number">123.</span>toFixed(<span class="number">2</span>) <span class="comment">// Uncaught SyntaxError: Unexpected token ILLEGAL</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解决：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">123</span>).toFixed(<span class="number">2</span>) <span class="comment">// &gt;&gt; "123.00"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>原因：</p>
<p>  很简单，js解释器会默认<code>.</code>应该是小数点而不是点操作符。</p>
</li>
</ul>
<h3 id="1-3_对象字面值的问题(updated:_2015-04-13)">1.3 对象字面值的问题(<em>updated: 2015-04-13</em>)</h3><ul>
<li><p>问题： 在（chrome）控制台输入以下代码会发生什么？</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; name: <span class="string">"mc"</span>, id: <span class="number">1</span> &#125; <span class="comment">// Uncaught SyntaxError: Unexpected token :</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解决：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#123; name: <span class="string">"mc"</span>, id: <span class="number">1</span> &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>原因：</p>
<p>  同<strong>1.1</strong>。但这里有个问题，<code>{name: &quot;mc&quot;}</code>是不会报错的。这行代码等同于<code>name: &quot;mc&quot;</code>，并返回一个字符串<code>&quot;mc&quot;</code>。具体colon（<code>:</code>）到底代表了什么操作，目前未知。</p>
</li>
</ul>
<h3 id="1-4_连等赋值问题(updated:_2015-04-23)">1.4 连等赋值问题(<em>updated: 2015-04-23</em>)</h3><ul>
<li><p>问题： javascript 连等赋值问题</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;n: <span class="number">1</span>&#125;;  </span><br><span class="line"><span class="keyword">var</span> b = a; </span><br><span class="line">a.x = a = &#123;n: <span class="number">2</span>&#125;;  </span><br><span class="line"><span class="built_in">console</span>.log(a.x);<span class="comment">// --&gt; undefined  </span></span><br><span class="line"><span class="built_in">console</span>.log(b.x);<span class="comment">// --&gt; &#123;n:2&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>原因： </p>
<p>  我们可以先尝试交换下连等赋值顺序（<code>a = a.x = {n: 2};</code>），可以发现输出不变，即顺序不影响结果。</p>
<p>  那么现在来解释对象连等赋值的问题：按照<a href="http://www.ecma-international.org/ecma-262/5.1/#sec-11.13" target="_blank" rel="external">ecma-262规范</a>，题中连等赋值等价于<br>  <code>a.x = (a = {n: 2});</code>，按优先获取左引用（<code>lref</code>），然后获取右引用（<code>rref</code>）的顺序，<code>a.x</code>和<code>a</code>中的a都指向了<code>{n: 1}</code>。至此，至关重要或者说最迷惑的一步明确。<code>(a = {n: 2})</code>执行完成后，变量<code>a</code>指向<code>{n: 2}</code>，并返回<code>{n: 2}</code>;接着执行<code>a.x = {n: 2}</code>，这里的<code>a</code>就是<code>b</code>（指向<code>{n: 1}</code>），所以<code>b.x</code>就指向了<code>{n: 2}</code>。</p>
<p>  搜索此题答案时，<a href="http://yanhaijing.com/javascript/2012/04/05/javascript-continuous-assignment-operator/" target="_blank" rel="external">颜海镜的一篇博客</a>关于此题也有讲述，不过没有讲清楚（或许是我没有领会 :P）。</p>
</li>
</ul>
<h3 id="1-5_逗号操作符(updated:_2015-04-29)">1.5 逗号操作符(<em>updated: 2015-04-29</em>)</h3><ul>
<li><p>问题： javascript comma operator，下面的代码返回什么，为什么？</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> temp = &#123;</span><br><span class="line">    x: <span class="number">40</span>,</span><br><span class="line">    foo: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">(temp.foo, temp.foo)(); <span class="comment">// 20，而不是40</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>原因： </p>
<p>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator" target="_blank" rel="external">MDN逗号操作符</a>: The comma operator evaluates each of its operands (from left to right) and returns the value of the last operand.</p>
<p>  即逗号操作符会从左到右计算它的操作数，返回最后一个操作数的值。所以<code>(temp.foo, temp.foo)();</code>等价于<code>var fun = temp.foo; fun();</code>，<code>fun</code>调用时<code>this</code>指向<code>window</code>，所以返回20。</p>
</li>
</ul>
<h2 id="2-_JavaScript内置API相关问题">2. JavaScript内置API相关问题</h2><h3 id="2-1_parseInt的问题(updated:_2015-04-13)">2.1 parseInt的问题(<em>updated: 2015-04-13</em>)</h3><ul>
<li><p>问题： </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="number">0.000008</span>) <span class="comment">// &gt;&gt; 0</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">0.0000008</span>) <span class="comment">// &gt;&gt; 8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>原因：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">0.000008</span>).toString() <span class="comment">// "0.000008"</span></span><br><span class="line">(<span class="number">0.0000008</span>).toString() <span class="comment">// "8e-7"</span></span><br></pre></td></tr></table></figure>
<p>  <code>parseInt(arg)</code>时会调用<code>arg.toString()</code>。</p>
</li>
</ul>
<hr>
<p>waiting… </p>

        </div>
        
            <section id="comments">
                <div id="disqus_thread">
                    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                </div>
            </section>
        
    </div>
    <nav class="pagination-bar mdl-color-text--grey-50">
    
    <div class="section-spacer"></div>
    
        <a href="/2015/04/JavaScript-timer/" class="pagination__button">
            Older
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
</div>
        </div>
    </main>
</div>

    <script>
        var disqus_shortname = 'ghblog-cp'; 
            var disqus_url = 'http://creeperyang.github.io/2015/04/frontend-questions-and-answers/'; 
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>

        <script src="/assets/scripts/material.min.js" type="text/javascript"></script>
        
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63704729-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

    </body>
</html>